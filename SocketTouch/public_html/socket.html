<script src="https://cdn.socket.io/socket.io-1.3.4.js"></script>
<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
<script src="https://code.jquery.com/mobile/git/jquery.mobile-git.min.js"></script>
<script src="http://intridea.github.com/sketch.js/lib/sketch.min.js"></script>

<div class="tools" style="min-width: 300px; height: 20px;" >
  <a href="#colors_sketch" data-download="png" style="float: right; width: 100px;">Download</a>
</div>
<canvas id="c" width="200" height="200" style="border: 1px solid #ccc" ></canvas>

<div id="cvs" style="widht:200px;height: 200px; border: 1px solid #000" >

</div>
<script>
    $('#cvs').mousemove(function(event) {
        var msg = "";

        socket.emit('my other event', {x: event.pageX, y: event.pageY});
//$( "#log" ).append( "<div>" + msg + "</div>" );
    });

/*
    var el = document.getElementById('c');
    var ctx = el.getContext('2d');
    var isDrawing;
    var es = $('#c');
    es.mousedown(function(e) {

        isDrawing = true;
        ctx.moveTo(e.clientX, e.clientY);
    });
    es.mousemove(function(e) {
        if (isDrawing) {
            socket.emit('my other event', {x: e.pageX, y: e.pageY});
            ctx.lineTo(e.clientX, e.clientY);
            ctx.stroke();
        }
    });
    es.mouseup(function() {
        isDrawing = false;
    });
*/
</script>
<script>
    var socket = io('http://localhost');
    socket.on('news', function(data) {
        console.log(data);
        socket.emit('my other event', {test: 'mitest'});
    });
    socket.on('item', function(data) {
        console.log(data);
        ctx.lineTo(data.x, data.y);
            ctx.stroke();
//socket.emit('my other event', { test: 'mitest' });
    });
    
  $(function() {
    $.each(['#f00', '#ff0', '#0f0', '#0ff', '#00f', '#f0f', '#000', '#fff'], function() {
      $('#colors_demo .tools').append("<a href='#colors_sketch' data-color='" + this + "' style='width: 10px; background: " + this + ";'></a> ");
    });
    $.each([3, 5, 10, 15], function() {
      $('#colors_demo .tools').append("<a href='#colors_sketch' data-size='" + this + "' style='background: #ccc'>" + this + "</a> ");
    });
    $('#c').sketch({
        onEvent: function(e){
      //if (e.originalEvent && e.originalEvent.targetTouches){
        e.pageX = e.originalEvent.targetTouches[0].pageX;
        e.pageY = e.originalEvent.targetTouches[0].pageY;
      socket.emit('my other event', {x: e.pageX, y: e.pageY});
  //}
      e.preventDefault()
      false}
    });
  });

</script> 